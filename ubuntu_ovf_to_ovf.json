{
  "builders": [
    {
      "type": "virtualbox-ovf",

      "source_path": "./output_images/packer-virtualbox-iso-ubuntu-18.04.ovf",

      "vm_name": "packer-virtualbox-ovf-ubuntu-18.04",

      "vboxmanage": [
        [
          "modifyvm",
          "{{.Name}}",
          "--memory",
          "512"
        ],
        [
          "modifyvm",
          "{{.Name}}",
          "--cpus",
          "1"
        ]
      ],

      "headless": true,

      "ssh_password": "ansiblesuperstrongunsecurepassphrase",
      "ssh_port": 22,
      "ssh_username": "ansible",
      "ssh_wait_timeout": "60s",

      "shutdown_command": "echo 'ansiblesuperstrongunsecurepassphrase' | sudo -S sh -c poweroff",

      "virtualbox_version_file": ".vbox_version"
    }
  ],
  "provisioners": [
    {
      "type": "ansible",
      "playbook_file": "./packer_provision/test.yml",
      "user": "ansible",
      "extra_arguments": [ "--extra-vars", "ansible_ssh_pass=ansiblesuperstrongunsecurepassphrase ansible_become_pass=ansiblesuperstrongunsecurepassphrase"],
      "roles_path": "./roles",
      "galaxy_file": "./roles/requirements.yml"
    }
  ]
}

